import{_ as h,c as k,f as r,a as i,b as l,d as e,e as a,r as p,o as y}from"./app-DgHb7HAz.js";const c={},g={class:"vp-file-tree"},u={class:"tree-node folder"},m={class:"tree-node file"},f={class:"tree-node file"},D={class:"tree-node file"},A={class:"tree-node file"},C={class:"tree-node file"},v={class:"tree-node file"},B={class:"tree-node file"},_={class:"tree-node file"};function q(b,s){const d=p("RouteLink"),o=p("ImageCard"),t=p("VPIcon"),n=p("FileTreeItem");return y(),k("div",null,[s[15]||(s[15]=r('<p>由于我们的开发理念就是快速部署和扩展，所以 Docker 是部署 PDATA最简单的方式，因为我们已经提前预设了一键构建 Docker 服务的脚本，这使得您在使用 Docker 部署时会非常省心，接下来我会引导您完成。</p><h3 id="安装docker" tabindex="-1"><a class="header-anchor" href="#安装docker"><span>安装docker</span></a></h3><ul><li>在开始之前，首先您要确保您的机器上已经安装好了 Docker 和 Docker-Compose，如果您还没安装可以到 <a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker 官网</a> 和 <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker-Compose</a> 来完成安装。</li></ul><h2 id="拉取服务代码" tabindex="-1"><a class="header-anchor" href="#拉取服务代码"><span>拉取服务代码</span></a></h2>',4)),i("ul",null,[i("li",null,[s[1]||(s[1]=l("在 ")),e(d,{to:"/guide/quick-start.html"},{default:a(()=>s[0]||(s[0]=[l("快速开始")])),_:1}),s[2]||(s[2]=l(" 页面您可以了解到如何获取我们的服务代码并启动实例。"))])]),s[16]||(s[16]=i("div",{class:"hint-container tip"},[i("p",{class:"hint-container-title"},"提示"),i("p",null,"在接下来的指南中，全部基于已经安装完 Docker 和 Docker-Compose，并已经拉取了相应的服务代码之上进行的流程。")],-1)),s[17]||(s[17]=i("h2",{id:"主节点部署",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#主节点部署"},[i("span",null,"主节点部署")])],-1)),e(o,{image:"/SND.png",title:"主节点部署，也可作为单节点使用",description:"作为主节点可以控制我们后续扩展的任何一台子节点机器，如果当作单节点来用，那么它也会是一个性能很好的单节点服务",href:"/",author:"yuanshaohang",date:"2024/05/21"}),i("p",null,[s[4]||(s[4]=l("在 PDATA 中不同于传统的自从节点，这套系统中的主节点与子节点并没有什么不同，可以互相支持互相替代，也就是说，当您根据 ")),e(d,{to:"/guide/quick-start.html"},{default:a(()=>s[3]||(s[3]=[l("快速开始")])),_:1}),s[5]||(s[5]=l(" 指南创建了一个服务后，那么等于主节点已经建立起来了，您现在需要关注的是是否需要建立更多的子节点。"))]),s[18]||(s[18]=i("h2",{id:"子节点部署",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#子节点部署"},[i("span",null,"子节点部署")])],-1)),e(o,{image:"/Nodes.png",title:"扩展子节点，使系统更加高可用更加健壮，功能更丰富",description:"由主节点来统一管理任务文件，控制子节点来进行任务分发，同时监控各个子节点的资源状态，自动同步主从节点的任务文件，快速便携的进行开发部署工作",href:"/",author:"yuanshaohang",date:"2024/05/21"}),s[19]||(s[19]=r(`<p>如果您已经掌握了主节点的部署方法，那么子节点的部署对于您来说会更加简单，只有一点不同！</p><div class="hint-container warning"><p class="hint-container-title">注意</p><ol><li>主从节点可以互相连接</li><li>工作节点的端口号 5052(API) 和 8889(grpc) 已开通</li></ol></div><p>开始部署</p><ul><li>首先进入项目根目录，然后执行脚本</li></ul><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reload_server_grpc.sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reload_server_grpc.sh</span></span></code></pre></div><h2 id="mysql数据库" tabindex="-1"><a class="header-anchor" href="#mysql数据库"><span>Mysql数据库</span></a></h2><p>您可能会注意到上述流程中都是用到了 Mysql 服务作为数据库管理工具，如果您已经有现存的 Mysql 服务可供使用，那么您可以直接修改后台项目代码中的setting配置来进行使用</p><div class="language-python" data-ext="python" data-title="python"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Mysql </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MYSQL_HOST</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your host name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MYSQL_DBNAME</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your dbname</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MYSQL_USER</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your user </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MYSQL_PASSWORD</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your password</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PORT</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">your pory</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre></div><ul><li>执行sql文件创建工作表结构</li><li>进入sql文件目录</li></ul><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data_backend/single_process/my_sql</span></span></code></pre></div><ul><li>可以看到以下sql文件</li></ul>`,11)),i("div",g,[i("ul",null,[e(n,{type:"folder",expanded:!0,empty:!1},{default:a(()=>[i("span",u,[e(t,{name:"vscode-icons:default-folder"}),s[6]||(s[6]=i("span",{class:"name"},"my_sql",-1))]),i("ul",null,[e(n,{type:"file",expanded:!1,empty:!0},{default:a(()=>[i("span",m,[e(t,{name:"vscode-icons:file-type-sql"}),s[7]||(s[7]=i("span",{class:"name"},"p_cron_info.sql",-1))])]),_:1}),e(n,{type:"file",expanded:!1,empty:!0},{default:a(()=>[i("span",f,[e(t,{name:"vscode-icons:file-type-sql"}),s[8]||(s[8]=i("span",{class:"name"},"p_data_board.sql",-1))])]),_:1}),e(n,{type:"file",expanded:!1,empty:!0},{default:a(()=>[i("span",D,[e(t,{name:"vscode-icons:file-type-sql"}),s[9]||(s[9]=i("span",{class:"name"},"p_disk_info.sql",-1))])]),_:1}),e(n,{type:"file",expanded:!1,empty:!0},{default:a(()=>[i("span",A,[e(t,{name:"vscode-icons:file-type-sql"}),s[10]||(s[10]=i("span",{class:"name"},"p_node_info.sql",-1))])]),_:1}),e(n,{type:"file",expanded:!1,empty:!0},{default:a(()=>[i("span",C,[e(t,{name:"vscode-icons:file-type-sql"}),s[11]||(s[11]=i("span",{class:"name"},"p_output.sql",-1))])]),_:1}),e(n,{type:"file",expanded:!1,empty:!0},{default:a(()=>[i("span",v,[e(t,{name:"vscode-icons:file-type-sql"}),s[12]||(s[12]=i("span",{class:"name"},"p_project_info.sql",-1))])]),_:1}),e(n,{type:"file",expanded:!1,empty:!0},{default:a(()=>[i("span",B,[e(t,{name:"vscode-icons:file-type-sql"}),s[13]||(s[13]=i("span",{class:"name"},"p_quota_info.sql",-1))])]),_:1}),e(n,{type:"file",expanded:!1,empty:!0},{default:a(()=>[i("span",_,[e(t,{name:"vscode-icons:file-type-sql"}),s[14]||(s[14]=i("span",{class:"name"},"p_SpiderList_monitor.sql",-1))])]),_:1})])]),_:1})])]),s[20]||(s[20]=i("div",{class:"hint-container tip"},[i("p",{class:"hint-container-title"},"提示"),i("p",null,"依次执行以上sql文件，确保数据库中已经创建上述表结构。")],-1)),s[21]||(s[21]=i("p",null,"至此您已经部署完成一个主节点和一个子节点了，如需扩展更多子节点，您只需在目标机器上进行上述同样的工作（除数据库以外）即可。",-1))])}const S=h(c,[["render",q],["__file","index.html.vue"]]),T=JSON.parse('{"path":"/guide/z4qm4jgj/","title":"Docker","lang":"zh-CN","frontmatter":{"title":"Docker","icon":"devicon:docker","createTime":"2024/12/06 22:40:03","permalink":"/guide/z4qm4jgj/"},"headers":[],"readingTime":{"minutes":2.74,"words":821},"git":{"updatedTime":1741000553000,"contributors":[{"name":"袁少航","username":"袁少航","email":"yuanshaohang@dataoceanai.com","commits":1,"avatar":"https://avatars.githubusercontent.com/袁少航?v=4","url":"https://github.com/袁少航"}]},"filePathRelative":"guide/installation/2.docker.md","bulletin":false}');export{S as comp,T as data};
